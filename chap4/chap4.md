# 第4章 プロセススケジューラ

Linuxは、プロセススケジューラにより複数プロセスを並行して動作させる。

- マルチコアCPUの1コアが一つのCPU（論理CPU）として認識される
- 1つのCPU上で同時に実行されるプロセスは1つのみ
- 1つのCPU上で複数プロセスを実行する場合、各プロセスを適当な時間長（タイムスライス）で切り替えて順次実行する
- 1つのCPUでプロセスは順序ローテーショで順次実行される（ラウンドロビン方式）各プロセスはほぼ等しい長さの時間単位で実行される

## コンテキストスイッチ

複数のプロセスが単一のCPUを共有でいるようにCPUの状態（コンテキスト）を保存・復元する過程。

## プロセスの状態

`ps`で確認できるプロセスの状態の一例

| 状態 | 概要 |
| :- | :- |
| 実行状態 | 論理CPUを使用中 |
| 実行待ち状態 | CPU時間の割当を待機中 |
| スリープ状態 | イベントの発生待ち。発生までCPU時間を使わない |
| ゾンビ状態 | 終了しているがプロセステーブルにエントリが存在する |

ゾンビ状態 ... プロセスが終了しているがプロセステーブルにエントリが存在する状態。プロセスの終了直後。親プロセスが子プロセスの終了ステータスを取得するまでの間。子プロセスの終了状態を親プロセスが正常に検知できないとき。

## コマンド

### `taskset`

指定したIDの論理CPUでプロセスを実行する。

### `ps`

現在のプロセスを確認する。
